# 패키지 설치와 노드 실행

## Turtlesim 이란?

   ros_tutorials repository 하위에 속해있으며 ROS를 처음 접하는 유저들에게 튜토리얼로 제공하기 위해 ROS 패키지로 제작되었다.
   ROS 학습용 패키지인 만큼 패키지, 노드, 토픽, 서비스, 액션, 파라미터에 대한 기본적인 학습과 함께 CLI툴, rqt툴도 체험해 볼 수 있다.

## Turtlesim 패키지와 노드

   - 노드는 ROS에서 최소단위의 실행가능한 프로세스라고 정의한다.
   - 하나이상의 노드 또는 노드 실행을 위한 정보등을 묶어 놓은것을 패키지라고 하며, 패키지의 묶음을 메타패키지라 부른다.

## rqt_graph로 보는 노드와 토픽의 그래프 뷰
   
   - rqt_graph실행 시 동그라미가 노드이고, 네모는 토픽 또는 액션, 화살표는 메시지의 방향을 의미한다. 
   - 서비스는 필요할 때 순간적으로 사용되는 형식이라 표시가 안된다.

# ROS2 노드와 데이터 통신

## 노드와 메시지 통신
   
   노드는 영상을 출력하는 노드, 영상을 필터링하는 노드, 필터링된 영상에서 특징을 추출하는 노드, 특징을 이용해 물건을 검출하는 노드, 검출된 물건의 위치로 로봇의 경로를 만들어내는 노드, 모터드라이버 노드, 경로대로 이동하는 노드 등 각 노드의 역할을 목적에 맞추어 세분화 시켜 각 노드들간의 의존성은 줄이고 독립성을 높여 다른 목적의 작업에서도 일부 노드를 재사용할 수 있도록 한다. 
   
   수많은 노드들이 연동되는 ROS시스템을 위해서는 노드와 노드사이에 입출력 데이터를 서로 주고받을 수 있도록 설계해야 한다.
   - 메시지: 주고받는 데이터
   - 메시지 통신: 주고받는 방식
   - 메시지 데이터 형태: Integer, Floating point, Boolean, String 
   - 메시지 주고받는 통신방법에 따른 분류: 토픽, 서비스, 액션, 파라미터


# ROS2 토픽

## 토픽
   
   - 비동기식 단방향 메시지 송수신 방식으로 msg 인터페이스 형태의 메시지를 퍼블리시하는 Publisher와 메시지를 서브스크라이브하는 Subscriber간의 통신이다.

   - 노드는 하나이상의 토픽을 퍼블리시 할 수 있을 뿐 아니라 Publisher 기능과 동시에 토픽을 서브스크라이브 하는 Subscriber역할도 동시에 수행할 수 있다.

## bag 기록

   - ROS2에는 퍼블리시되는 토픽을 파일형태로 저장하고 필요할때 저장된 토픽을 다시 불러와 동일한 주기로 재생할 수 있는 기능이 있다. 이를 rosbag이라고 한다.
   - 매번 로봇을 구동시켜 데이터를 취득하기도 힘들고 데이터를 취득하여 테스트를 하더라도 센서정보 및 로봇 상태값에 따라 결과값이 달라져서 알고리즘이 좋아진 것인지 로봇 및 상태값이 좋았는지 구분하기 어렵기 때문에 사용한다.

# ROS2 서비스

## 서비스
 
   - 동기식 양방향 메시지 송수신 방식으로 서비스를 요청하는 쪽을 Service Client, 요청받은 서비스를 수행 후 응답하는 쪽을 Service Server라고 한다.
   - 서비스는 동일한 서비스서버에 대해 복수의 클라이언트를 가질 수 있도록 설계되었다.
